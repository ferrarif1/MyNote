`ulimit -c` 查看 core dump是否开启
`ulimit -c unlimited`  开启core dump



测试代码

```cpp
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>

using namespace std;

#define NUM_THREADS 5

void* proca(void*)
{
    printf("In ProcA\n");
    sleep(5);
    printf("ProcA: Try Throw...\n");
    throw 3;
}

void* procb(void*)
{
    printf("In ProcB\n");
    char *p = NULL;
    *p = 'h';
}

int main()
{
    pthread_t tids[NUM_THREADS];
    printf("In Main Thread.\n");
    int ret = pthread_create( &tids[0], NULL, proca, NULL);
    printf("ProcA Started.\n");
    ret = pthread_create( &tids[1], NULL, procb, NULL);
    printf("ProcB Started.\n");

    sleep(10);
    printf("Start joining A\n");
    pthread_join(tids[0], NULL);
    printf("Start joining B\n");
    pthread_join(tids[1], NULL);

    return 0;
}
```







编译

```
g++ -g  mt_exception.cpp  -lpthread

(venv) [root@localhost test_seh]# ls
a.out  core_dump.cpp  mt_exception.cpp  seh.cpp
(venv) [root@localhost test_seh]# 
(venv) [root@localhost test_seh]# ./a.out 
In Main Thread.
ProcA Started.
In ProcA
ProcB Started.
In ProcB
ProcA: Try Throw...
Segmentation fault (core dumped)   //产生了 core文件
(venv) [root@localhost test_seh]# 
(venv) [root@localhost test_seh]# gdb -c core.16533 ./a.out 
GNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-115.el7
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /root/tmp/test_seh/a.out...done.
[New LWP 16535]
[New LWP 16533]
[New LWP 16534]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
Core was generated by `./a.out'.
Program terminated with signal 11, Segmentation fault.
#0  0x00000000004007e5 in procb () at mt_exception.cpp:23
23	    *p = 'h';  //引发异常的地方
Missing separate debuginfos, use: debuginfo-install glibc-2.17-260.el7_6.6.x86_64 libgcc-4.8.5-39.el7.x86_64 libstdc++-4.8.5-39.el7.x86_64
(gdb) 
(gdb) 

```



